// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
  // directUrl = env("DIRECT_URL")
  // shadowDatabaseUrl = env("SHADOW_DATABASE_URL")
}

model Produto {
  id          Int         @id @default(autoincrement())
  nome        String
  foto        String?
}


model User {
  id    Int    @id @default(autoincrement())
  name  String
  email String
  addresses Address[]
  orders Order[]
  session Session?
}

model Order {
  id               Int      @id @default(autoincrement())
  users_id         Int
  total            Int
  order_number     Int
  status           String
  user             User     @relation(fields: [users_id], references: [id])
  address          Address[]
  order_items      OrderItem[]
}

model OrderItem {
  id        Int      @id @default(autoincrement())
  price     Float
  orders_id   Int
  products_id Int
  order     Order    @relation(fields: [orders_id], references: [id])
  product   Product  @relation(fields: [products_id], references: [id])
}
model Address {
  id          Int      @id @default(autoincrement())
  users_id    Int?
  orders_id   Int?
  type        String
  street      String
  number      String?
  complement String?
  complement2 String?
  neighborhood String?
  city        String
  state       String
  country     String
  zip_code    String

  user        User?     @relation(fields: [users_id], references: [id])
  order       Order?    @relation(fields: [orders_id], references: [id])
}

model Product{
  id Int @id @default(autoincrement())
  name String
  description String
  price Float
  product_categories_id Int
  sku String

  product_category ProductCategory @relation(fields: [product_categories_id],references: [id])
  order_items OrderItem[]
}


model ProductCategory{
  id Int @id
  name String
  product Product[]
}

model Session{
  id Int @id @default(autoincrement())
  user_id Int @unique
  cart_contents Json
  session_token String

  user User @relation(fields: [user_id],references: [id])
}